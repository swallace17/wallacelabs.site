<!doctype html><html lang=en dir=auto>
<head><meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge">
<meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no">
<meta name=robots content="index, follow">
<title>Static Site Hosting for Free with Docker, Hugo, and NGINX Proxy Manger | Wallace Labs</title><meta name=keywords content="Hugo,NGINX Proxy Manager,Docker Compose,Dynamic DNS (DDNS)">
<meta name=description content="Overview It seems appropriate that my first post on this site be an exploration of its own technical underpinnings. That being said, before I get too far into the weeds, a bit of context. When I set out to build my site I had a few goals in mind. Those goals can be reasonably summed up as wanting to build a site from markdown files in Github, and self-host it using docker containers.">
<meta name=author content="Samuel Wallace">
<link rel=canonical href=https://wallacelabs.tech/posts/static-site-hosting-with-docker-hugo-and-nginx-proxy-manger/>
<meta name=google-site-verification content="XYZabc">
<meta name=yandex-verification content="XYZabc">
<meta name=msvalidate.01 content="XYZabc">
<link crossorigin=anonymous href=/assets/css/stylesheet.min.c88963fe2d79462000fd0fb1b3737783c32855d340583e4523343f8735c787f0.css integrity="sha256-yIlj/i15RiAA/Q+xs3N3g8MoVdNAWD5FIzQ/hzXHh/A=" rel="preload stylesheet" as=style>
<script defer crossorigin=anonymous src=/assets/js/highlight.min.4dcb3c4f38462f66c6b6137227726f5543cb934cca9788f041c087e374491df2.js integrity="sha256-Tcs8TzhGL2bGthNyJ3JvVUPLk0zKl4jwQcCH43RJHfI=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://wallacelabs.tech/favicon.ico>
<link rel=icon type=image/png sizes=16x16 href=https://wallacelabs.tech/favicon-16x16.png>
<link rel=icon type=image/png sizes=32x32 href=https://wallacelabs.tech/favicon-32x32.png>
<link rel=apple-touch-icon href=https://wallacelabs.tech/apple-touch-icon.png>
<link rel=mask-icon href=https://wallacelabs.tech/safari-pinned-tab.svg>
<meta name=theme-color content="#2e2e33">
<meta name=msapplication-TileColor content="#2e2e33">
<noscript>
<style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(e,o,i,a,t,n,s){e.GoogleAnalyticsObject=t,e[t]=e[t]||function(){(e[t].q=e[t].q||[]).push(arguments)},e[t].l=1*new Date,n=o.createElement(i),s=o.getElementsByTagName(i)[0],n.async=1,n.src=a,s.parentNode.insertBefore(n,s)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-123-45","auto"),ga("send","pageview"))</script><meta property="og:title" content="Static Site Hosting for Free with Docker, Hugo, and NGINX Proxy Manger">
<meta property="og:description" content="Overview It seems appropriate that my first post on this site be an exploration of its own technical underpinnings. That being said, before I get too far into the weeds, a bit of context. When I set out to build my site I had a few goals in mind. Those goals can be reasonably summed up as wanting to build a site from markdown files in Github, and self-host it using docker containers.">
<meta property="og:type" content="article">
<meta property="og:url" content="https://wallacelabs.tech/posts/static-site-hosting-with-docker-hugo-and-nginx-proxy-manger/">
<meta property="og:image" content="https://wallacelabs.tech/cover.png"><meta property="article:section" content="posts">
<meta property="article:published_time" content="2022-03-03T13:35:19-05:00">
<meta property="article:modified_time" content="2022-03-03T13:35:19-05:00"><meta property="og:site_name" content="Wallace Labs">
<meta name=twitter:card content="summary_large_image">
<meta name=twitter:image content="https://wallacelabs.tech/cover.png">
<meta name=twitter:title content="Static Site Hosting for Free with Docker, Hugo, and NGINX Proxy Manger">
<meta name=twitter:description content="Overview It seems appropriate that my first post on this site be an exploration of its own technical underpinnings. That being said, before I get too far into the weeds, a bit of context. When I set out to build my site I had a few goals in mind. Those goals can be reasonably summed up as wanting to build a site from markdown files in Github, and self-host it using docker containers.">
<script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"Posts","item":"https://wallacelabs.tech/posts/"},{"@type":"ListItem","position":3,"name":"Static Site Hosting for Free with Docker, Hugo, and NGINX Proxy Manger","item":"https://wallacelabs.tech/posts/static-site-hosting-with-docker-hugo-and-nginx-proxy-manger/"}]}</script>
<script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Static Site Hosting for Free with Docker, Hugo, and NGINX Proxy Manger","name":"Static Site Hosting for Free with Docker, Hugo, and NGINX Proxy Manger","description":"Overview It seems appropriate that my first post on this site be an exploration of its own technical underpinnings. That being said, before I get too far into the weeds, a bit of context. When I set out to build my site I had a few goals in mind. Those goals can be reasonably summed up as wanting to build a site from markdown files in Github, and self-host it using docker containers.","keywords":["Hugo","NGINX Proxy Manager","Docker Compose","Dynamic DNS (DDNS)"],"articleBody":"Overview It seems appropriate that my first post on this site be an exploration of its own technical underpinnings. That being said, before I get too far into the weeds, a bit of context. When I set out to build my site I had a few goals in mind. Those goals can be reasonably summed up as wanting to build a site from markdown files in Github, and self-host it using docker containers. Simple enough, but lets unpack that a bit:\n Self-Host  Run all the website infrastructure in my home, and avoid paying a hosting provider like Squarespace or Wix, as nice as those tools can be.   Write all my posts in markdown  Markdown enables easy text-formatting, and allows me to do all my writing in any number of great, markdown-supporting text-editors on basically any computing platform.   Run all infrastructure in containers  Running my web-hosting infrastructure entirely inside docker containers allows me to easily change what computer is running my website in the event that doing so becomes necessary or desirable. Migrating to another computer I own, to a Virtual Private Server (VPS) I rent, or to the Cloud with Azure or AWS container hosting– it all becomes trivial.   Store the site as a repository in Github  Site files being a Github repo provides me with backups and quick visibility into my site’s version history. Additionally, it works alongside the docker containers to keep my site mobile. If I decide to migrate hosts in the future, I won’t need to worry about transferring my site files manually. With them in Github, all I would need to do is initiate a git clone of my site’s repo on the new host, and the site files are ready to go!    With those goals in mind, I eventually landed on using docker containers of Hugo (to build my site), and NGINX Proxy Manager (to host it). If you would like to do something similar, and build a site like the one you are currently viewing, the below should be helpful! With that out of the way, lets begin.\nRequirements In order to successfully build and host a site using this method, the below are prerequisites:\n Own a domain name. Mine is wallacelabs.tech. If you do not already own one, I recommend purchasing from Hover or Google Domains. As part of owning a domain, you will have control of your domain’s DNS records. If you somehow own a domain but do not have the ability to manage its DNS records, you’ll have to get that worked out before proceeding. Own an internet-connected computer. This computer will be your web-server. Ideally, that computer will be a server in the sense that it is always on, and dedicated to server functions. While you could host your website on your everyday use computer, I would not recommend it. In terms of actual hardware though? It can be anything from a tiny Raspberry Pi to a massive EPYC Server. The important thing is that it can run docker, is connected to the internet, and is always on. Be able to manage port-forwarding rules on your network’s router/gateway. Port-forwarding on your router, along with setting your domain’s DNS records, are the two keys required to map traffic from the internet to the web-server hosting your site. Either a Static WAN IP, or a Dynamic DNS configuration. This is required in order for your domain’s DNS rules to reliably point traffic to the router on your local network. Most home internet connections do not have static WAN IP’s, so you’ll likely need to configure a Dynamic DNS (DDNS) service. Stated simply, DDNS is a way of automatically informing your domain’s DNS servers of any changes to your home network’s Public IP Address. Google Domains has a highly convenient DDNS service built in, if you use them as your domain registrar. If you do not use Google Domains, I would strongly recommend using DuckDNS.   When your website is accessed from the internet, the traffic will follow this general path. Most of these requirements exist in order to make sure that traffic can reliably traverse this path, allowing your site to be online.\n  If you can check all those boxes, you should be good to go.\nPhase One - Getting Your Site Running Locally Before worrying about domain DNS records, web hosting, and port-forwarding rules, we’re going to focus on getting a site running on your local network. First, we’ll setup the web-server.\nInstalling Docker In order to setup containers for Hugo and NGINX Proxy Manager, you will need Docker installed on your web-server. Docker runs on Windows, macOS, and Linux, so the Operating System (OS) you use is mostly up to you. It is, however, worth mentioning that less setup is required on Linux and macOS. To run Docker in an ideal manner on Windows, you will need to configure Windows Subsystem for Linux (WSL) and subsequently, a Linux Distribution of your choice to run on WSL. This is not overly complicated, but it is outside the scope of this discussion. A post for another day, perhaps.\n A quick aside: If you plan on using this system as a general purpose home server, in addition to using it as a web-host, it is definitely worth considering the security implications of doing so. By using a computer for web hosting, you are inherently opening up this system to the internet, and there is a lot to be said for the practice of isolating web-hosts on your network through any variety of means. A thorough consideration of these potential risks (and the network hardening measures which might be taken to mitigate them) would be a large digression, and thus is outside the scope of this discussion. Another post for another day, perhaps. For now though, suffice it to say that our risk factor here is not particularly large, due primarily to the fact that we are discussing hosting a static site, not a dynamic one. Had I opted to host a dynamic site using Wordpress, or something of the like, I would be singing a different tune. For additional reading on the security implications of static vs. dynamic sites, see here.\n Begin by installing the Docker Engine using the instructions specific to your OS. Once Docker is installed, you can move on to setting up a Hugo container.\nSetting up a Hugo container To create my site, I utilized a container based on the Hugo Docker Image. Hugo’s Docker-Hub image is highly configurable, offering many different tags for specialized integration into custom web-publishing workflows. For my use, all I really wanted was basic container which, when run, provides an interactive shell environment where I can run Hugo commands. The below docker compose file will accomplish this:\n To utilize this compose file to setup your own Hugo container, first, go ahead and download it. Then, open it in your text-editor of choice and update the volume mapping from *PATH TO SITE* in line 6 to wherever you would like your site’s git repo to live on your host system. I would recommend creating a folder called site at the root level of your host. If you go that route, just change *PATH TO SITE* to /site and you’re good to go. Lastly, open up a Terminal/Powershell session, navigate to whichever folder docker-compose.yml has been downloaded to, and run the following command:\ndocker-compose up You should see the following in your Terminal session:\n Now, open up Docker Desktop and you should see your container running, like this:\n Note that Docker Desktop is only currently avalible for macOS and Windows, though a Linux version is in Tech Preview, should you wish to try it.\n  With the Hugo container setup and ready to go, you can now use it to create your Hugo site-template.\nCreating your Hugo-Site Now we’re in business. Click the “CLI” button in Docker Desktop to open up a CLI session on your Hugo container. This is how you’ll interact with the containerized Hugo program moving forward.\nYour CLI session will have opened up inside the container’s /src folder by default. The /src folder is a volume mapped to the host. Whatever data the container puts in this folder, you will be able to access from the host, and vice versa. In docker containers, data inside a volume map like this one is also the only data that will persist after the container is stopped or restarted (i.e. the /src folder is the only thing that does not get deleted when the container stops). The rest of the container is rebuilt from scratch every time the container starts. Given you probably want your Hugo-site to not be deleted after you create it, you will want to create it inside the /src folder. Furthermore, whenever you run Hugo commands, you’ll want to run them in this folder (Hugo commands have to be run against a Hugo-site, and this is where your Hugo-site will be located).\nSo, with a CLI session opened at /src, run the below command. When you do, a blank Hugo site template will be initialized as a git repo inside the /src folder. Just be sure to change *YOUR_SITE_NAME* to whatever you would like to call the repo containing your site.\nhugo new site *YOUR_SITE_NAME* The Hugo-site will be generated, and you will see the below message in your CLI session:\n Success!\n  Next up, as indicated in that success message, you’ll need to pick a theme and install it. There are tons to choose from! If you are curious, the site you are viewing now is running on PaperMod. Installing your chosen theme is as simple as following the instructions provided by your theme of choice. These instructions usually consist of installing the theme as a git-submodule. This method is convenient as it allows you to easily update your theme by initiating a git pull on that submodule. Put more simply- you’ll have a one-click method of updating to a new version of your chosen theme in the future, should you want to do so. As you follow installation instructions, just make sure to run any necessary commands inside the Hugo container’s CLI. With a blank Hugo site template created and your theme installed, the foundation of your site is in place.\nCreating your first post With your site created, you can now create a quick test post. Before that though, a brief rabbit-trail about Leaf Bundles.\nTo Leaf-Bundle, or not to Leaf-Bundle  In a moment, you’ll run a command that will create the first post on your newly created site. That command is going to create the post as something Hugo calls a Leaf Bundle. I recommend creating all your posts as a leaf bundle because, among other benefits, it allows you to bundle post-images inside the same folder as as the markdown text-file of the post itself. If you do not create your posts as leaf bundles, any images for your posts will be lumped together, completely disorganized, inside a folder named static at the root level of your site. Not ideal. The below diagrams should help visualize this:\n Leaf Bundle Post Structure\n content/ └──posts  └── YOUR_POST_NAME  ├── image1.png  ├── image2.png  └── index.md  Non-Leaf Bundle Post Structure\n content/ ├── posts │ ├── my-post.md │ └── my-other-post.md └── static  ├── my-post_image1.png  ├── my-post_image2.png  ├── my-post_image3.jpg  ├── my-other-post_image1.png  └── my-other-post_image2.jpg  As you accumulate more and more posts, the disorganized pile of images inside /static will continue to get larger and more unwieldy. I highly prefer the structure provided by the leaf bundle method, and I think you will too. Now, back to the business of creating your first post.\nCreating a post (As a Leaf-Bundle!!) Run the below command in the Hugo container CLI to create a test post on your site:\nhugo new content/posts/*YOUR_POST_NAME*/index.md If you wish, feel free to modify index.md to add a quick “hello world” message, or something of the like, but do not feel obligated. Your first post has been created, whether it has anything written in it or not. With that, time to generate your site!\nGenerating your Site One last command to run now.\nhugo With that, your hugo site has been converted from a pile of markdown documents, images, themes, and the like (that only Hugo can understand) to an actual HTML website that can be displayed by any web browser. You’ll find the generated website inside the public folder created at the root-level of your site’s repo.\n This folder is what your web-server will be pushing out to the internet whenever someone accesses your website. Your web-server will only serve the HTML files that are in this server, so any time you want to update your site, or add a new post, you will need to run the hugo command again to generate your site fresh.\n Hosting your Site! (Locally) Before setting up your newly generated site to be accessed over the internet, we’re going to preview it on your local network. Hugo includes a built-in web-host function for this exact purpose. To take advantage of this, run the below command (again, inside the Hugo Container’s CLI):\nhugo server With luck, you’ll be greeted with the following message:\nOpen http://localhost:1313 in your browser of choice to view your site! As you may have noticed in the above image, the nice thing about previewing your site this way is that Hugo generates the preview in something called “Fast Render Mode.” Fast Render Mode means you don’t have to run the hugo command and regenerate your site every time you want to see a change displayed in your browser. Using the local preview, if you are editing a post, just save any changes you’ve made to the index.md file and you will see them immediately reflected in your browser. Live previewing!\n If you were not so lucky, you may have gotten an error in your CLI session that says something like “Check your Hugo installation: you need the extended version to build…”. This is because some themes require an extended version of the Hugo docker image in order to build successfully. Remember earlier, when I said the Hugo image is highly configurable, has many tags, blah blah blah? Here you have a great illustration of that fact. If this happens to you, change line 3 of docker-compose.yml from image: klakegg/hugo:latest to image: klakegg/hugo:ext-alpine. Shut down your container, relaunch it using docker-compose up, and you should be good to go.\n Phase Two - Hosting your Site on the Web! Believe it or not, this should be the easy part. We’re going to spin up another container, this time for NGINX Proxy Manager (NPM). NGINX Proxy Manager is an awesome web-based GUI built on top of the NGINX web server. It is generally used for securely exposing services running on your network to the internet. For example, if you wanted to securely access your Home Assistant Server over the internet, rather than strictly on your home network, or via VPN. In that scenario, you already have a web-server operating a given service or web-app locally, you are just using NPM as a reverse proxy to access that service over the internet. So how can NPM be used to host your site? With a little bit of tricky configuration, NPM can be used to host static files to the web– which is exactly what Hugo static sites are!\nAs preparation for that, lets quickly configure DNS rules for your domain, and add port forwarding rules to your router.\nConfiguring your Domain and Router Begin by logging into your domain registrar’s website, then pull up the page for managing your domain’s DNS records. For me, on Google Domains, it looks like this:\n You will want to create a DNS A record resolving yourDomain.com to your public IP address. Ideally, this address will be static, but most home connections are not. With that in mind, I’d recommend configuring Dynamic DNS (DDNS) via Google Domains or Duck DNS, as earlier stated. Without DDNS in place, your site will go down any time the public IP on your home network changes (usually when you reboot your modem). With this DNS record in place, anytime someone accesses yourDomain.com, your domain registrar’s nameservers will resolve the request to your home network’s router/gateway.\nAll thats left is to setup your router/gateway to send that traffic to your webserver, completing the chain. With that in mind, login to the management interface of your router/gateway, navigate to the Port-Forwarding management page, and add a rule. This will be different on every router, but for me, on a Ubiquiti UniFi based network, it looks like this:\n Make sure to set ‘Forward IP’ to the IP address of your web-server. Also, double check and make sure your web-server is setup with a static IP address while you’re at it. Don’t want that changing on you!\n  You’re going to need to create two rules here– one for HTTP traffic coming in over port 80, and another for HTTPS on port 443. You’re configuring these rules to route any traffic coming into your network over port 80 or 443 to your web-server. With those rules in place, you should see something like this:\n Port-forwarding complete. Almost done!\n  With port forwarding complete, you’ve completed the chain such that all traffic going to your domain will reach your web-server, like in this image we looked at in the beginning:\n Traffic mapping complete!\n  Setting up an NGINX Proxy Manager container We’re nearing the end! Now that\n Your HTML site is sitting in the public folder Your router and domain DNS are configured to point HTTP and HTTPS traffic to your web-server  All thats left is to configure NGINX Proxy Manager to actually serve your website! To do that, use the below docker-compose.yml to create an NPM container on your host. Same drill as before, download the file, and you’ll need to make a couple edits before running.\n First, you’ll need to chose where on your host system you would like NPM data and LetsEncrypt certificates to live. I recommend creating a folder named container_app_data at the root of your host, with sub-folder NPM. Do that, then just change *PATH* in lines 10 and 11 of docker-compose.yml to /container_app_data/NPM, and docker will automatically create sub-folders for Data and Lets Encrypt at /container_app_data/NPM/data and /container_app_data/NPM/letsencrypt respectively.\nLastly, you’ll need to change *PATH TO SITE* in line 12. Set this to be the same as whatever you chose for *PATH TO SITE* when creating the Hugo container. Giving NPM access to *PATH TO SITE*/public will allow it to access your generated site (inside the Hugo container’s public folder).\nWith these modifications in place, open a Terminal/Powershell session at the location of docker-compose.yml and run the command:\ndocker-compose up If everything is setup correctly in docker-compose.yml, the container will build and you’ll be greeted by the following new container in Docker Desktop:\n Two containers now!\n  Configuring NPM for Static-Site Hosting With the container running, open up a browser on your host machine and navigate to http://localhost:81. When you do, you should see the NPM login page:\n To login, use the default username and password:\nEmail: admin@example.com Password: changeme You will then be prompted to setup new login credentials. As with anything, make sure to setup a unique, strong password (I recommend 1Password to help with this). Once you’ve setup your new login setup, click on “SSL certificates” in the tab bar, then “Add SSL Certificate.” On this screen, type in your domain name, email and “I agree to the Let’s Encrypt Terms of Service”, like this:\n Before clicking save, make sure to click the button to “Text Server Reachability”. You should see the following message if successful:\n Success here demonstrates traffic from the internet is reaching your web server correctly. Congratulations! You must have setup your domain DNS records and port-forwarding rules successfully. If you don’t get a success message here, you might need to go back and double-check those steps. Click the save button, and your SSL certificate will be added:\n With your SSL certificate created, all thats left is to configure a Proxy Host, and your site is live! Click the Hosts tab, then Proxy Hosts. On the Proxy Hosts page, click the Add Proxy Host button. The New Proxy Host screen will pop up, on the details tab. Set it up like this:\n Obviously be sure to use your actual domain name, not yourDomain.com and www.yourDomain.com\n  Then click on the SSL tab and select the SSL cert you just created, like this:\n Lastly, click the Advanced tab, and paste the below as Custom Nginx Configuration.\nlocation / {  root /site/; } like this:\n This is the ’tricky configuration’ I mentioned earlier. Thanks to Burke Azbill writing on dimentionquest.net for figuring this out!\n  This little bit of custom configuration is having NGINX host the static content contained inside the NPM container’s /site folder. That folder just so happens to container your website, as, when you modified the docker-compose.yml for the NPM container, you mapped it to the same location as the public folder your website was generated in. Save this config, and your website should be live! Open up a browser, navigate to your domain name, and there it will be! With your site created, all you have to do now is fill it with content. Congratulations!\nPhase Three - Wrapping Up Lets wrap up with connecting your site up to a Github repo, and some things you can do to enable some general quality-of-life improvements as you manage your site.\nConfigure Additional Development Environments This may sound counterintuitive, but I would recommend setting up as additional development environment on your everyday computer to do most of your site development on–setting up the site, testing changes, writing posts, etc. Then, whenever you are ready to publish, you push your changes up to your Github repo, and pull them down on the web server. Boom, published. This is how I personally develop for my site most of the time. On my laptop, I use the Atom text editor\n","wordCount":"3671","inLanguage":"en","image":"https://wallacelabs.tech/cover.png","datePublished":"2022-03-03T13:35:19-05:00","dateModified":"2022-03-03T13:35:19-05:00","author":{"@type":"Person","name":"Samuel Wallace"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://wallacelabs.tech/posts/static-site-hosting-with-docker-hugo-and-nginx-proxy-manger/"},"publisher":{"@type":"Organization","name":"Wallace Labs","logo":{"@type":"ImageObject","url":"https://wallacelabs.tech/favicon.ico"}}}</script>
</head><body id=top>
<script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script>
<header class=header>
<nav class=nav>
<div class=logo>
<a href=https://wallacelabs.tech accesskey=h title="> wallaceLabs (Alt + H)">> wallaceLabs</a>
<span class=logo-switches>
<button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg>
</button>
</span>
</div><ul id=menu>
<li>
<a href=https://wallacelabs.tech/archives/ title=archives>
<span>archives</span>
</a>
</li><li>
<a href=https://wallacelabs.tech/categories/ title=categories>
<span>categories</span>
</a>
</li><li>
<a href=https://wallacelabs.tech/search/ title="search (Alt + /)" accesskey=/>
<span>search</span>
</a>
</li><li>
<a href=https://wallacelabs.tech/tags/ title=tags>
<span>tags</span>
</a>
</li></ul></nav></header><main class=main>
<article class=post-single>
<header class=post-header>
<div class=breadcrumbs><a href=https://wallacelabs.tech>Home</a>&nbsp;»&nbsp;<a href=https://wallacelabs.tech/posts/>Posts</a></div><h1 class=post-title>
Static Site Hosting for Free with Docker, Hugo, and NGINX Proxy Manger<sup><span class=entry-isdraft>&nbsp;&nbsp;[draft]</span></sup>
</h1><div class=post-meta><span title="2022-03-03 13:35:19 -0500 -0500">March 3, 2022</span>&nbsp;·&nbsp;18 min&nbsp;·&nbsp;Samuel Wallace&nbsp;|&nbsp;<a href=https://github.com/swallace17/wallacelabs.site/tree/main/content/posts/Static%20Site%20Hosting%20with%20Docker,%20Hugo,%20and%20NGINX%20Proxy%20Manger/index.md rel="noopener noreferrer" target=_blank>Suggest Changes</a>
</div></header><figure class=entry-cover>
<img loading=lazy srcset="https://wallacelabs.tech/posts/static-site-hosting-with-docker-hugo-and-nginx-proxy-manger/cover_hu0a7d419323092a7d0b842a685d97c3b7_129130_360x0_resize_box_3.png 360w ,https://wallacelabs.tech/posts/static-site-hosting-with-docker-hugo-and-nginx-proxy-manger/cover_hu0a7d419323092a7d0b842a685d97c3b7_129130_480x0_resize_box_3.png 480w ,https://wallacelabs.tech/posts/static-site-hosting-with-docker-hugo-and-nginx-proxy-manger/cover_hu0a7d419323092a7d0b842a685d97c3b7_129130_720x0_resize_box_3.png 720w ,https://wallacelabs.tech/posts/static-site-hosting-with-docker-hugo-and-nginx-proxy-manger/cover_hu0a7d419323092a7d0b842a685d97c3b7_129130_1080x0_resize_box_3.png 1080w ,https://wallacelabs.tech/posts/static-site-hosting-with-docker-hugo-and-nginx-proxy-manger/cover.png 1200w" sizes="(min-width: 768px) 720px, 100vw" src=https://wallacelabs.tech/posts/static-site-hosting-with-docker-hugo-and-nginx-proxy-manger/cover.png alt=text width=1200 height=630>
<p>My mission to build a site and achieve simple DIY web-hosting</p></figure><div class=toc>
<details>
<summary accesskey=c title="(Alt + C)">
<span class=details>Table of Contents</span>
</summary>
<div class=inner><ul>
<li>
<a href=#overview aria-label=Overview>Overview</a></li><li>
<a href=#requirements aria-label=Requirements>Requirements</a></li><li>
<a href=#phase-one---getting-your-site-running-locally aria-label="Phase One - Getting Your Site Running Locally">Phase One - Getting Your Site Running Locally</a><ul>
<li>
<a href=#installing-docker aria-label="Installing Docker">Installing Docker</a></li><li>
<a href=#setting-up-a-hugo-container aria-label="Setting up a Hugo container">Setting up a Hugo container</a></li><li>
<a href=#creating-your-hugo-site aria-label="Creating your Hugo-Site">Creating your Hugo-Site</a></li><li>
<a href=#creating-your-first-post aria-label="Creating your first post">Creating your first post</a><ul>
<li>
<a href=#to-leaf-bundle-or-not-to-leaf-bundle aria-label="To Leaf-Bundle, or not to Leaf-Bundle">To Leaf-Bundle, or not to Leaf-Bundle</a></li><li>
<a href=#creating-a-post-as-a-leaf-bundle aria-label="Creating a post (As a Leaf-Bundle!!)">Creating a post (As a Leaf-Bundle!!)</a></li></ul></li><li>
<a href=#generating-your-site aria-label="Generating your Site">Generating your Site</a></li><li>
<a href=#hosting-your-site-locally aria-label="Hosting your Site! (Locally)">Hosting your Site! (Locally)</a></li></ul></li><li>
<a href=#phase-two---hosting-your-site-on-the-web aria-label="Phase Two - Hosting your Site on the Web!">Phase Two - Hosting your Site on the Web!</a><ul>
<li>
<a href=#configuring-your-domain-and-router aria-label="Configuring your Domain and Router">Configuring your Domain and Router</a></li><li>
<a href=#setting-up-an-nginx-proxy-manager-container aria-label="Setting up an NGINX Proxy Manager container">Setting up an NGINX Proxy Manager container</a></li><li>
<a href=#configuring-npm-for-static-site-hosting aria-label="Configuring NPM for Static-Site Hosting">Configuring NPM for Static-Site Hosting</a></li></ul></li><li>
<a href=#phase-three---wrapping-up aria-label="Phase Three - Wrapping Up">Phase Three - Wrapping Up</a><ul>
<li>
<a href=#configure-additional-development-environments aria-label="Configure Additional Development Environments">Configure Additional Development Environments</a>
</li></ul></li></ul></div></details>
</div><div class=post-content><h2 id=overview>Overview<a hidden class=anchor aria-hidden=true href=#overview>#</a></h2><p>It seems appropriate that my first post on this site be an exploration of its own technical underpinnings. That being said, before I get too far into the weeds, a bit of context. When I set out to build my site I had a few goals in mind. Those goals can be reasonably summed up as wanting to build a site from markdown files in Github, and self-host it using docker containers. Simple enough, but lets unpack that a bit:</p><ul>
<li>Self-Host
<ul>
<li>Run all the website infrastructure in my home, and avoid paying a hosting provider like Squarespace or Wix, as nice as those tools can be.</li></ul></li><li>Write all my posts in <a href=https://daringfireball.net/projects/markdown/>markdown</a>
<ul>
<li>Markdown enables easy text-formatting, and allows me to do all my writing in any number of great, markdown-supporting text-editors on basically any computing platform.</li></ul></li><li>Run all infrastructure in containers
<ul>
<li>Running my web-hosting infrastructure entirely inside docker containers allows me to easily change what computer is running my website in the event that doing so becomes necessary or desirable. Migrating to another computer I own, to a Virtual Private Server (VPS) I rent, or to the Cloud with Azure or AWS container hosting&ndash; it all becomes trivial.</li></ul></li><li>Store the site as a repository in Github
<ul>
<li>Site files being a Github repo provides me with backups and quick visibility into my site&rsquo;s version history. Additionally, it works alongside the docker containers to keep my site mobile. If I decide to migrate hosts in the future, I won&rsquo;t need to worry about transferring my site files manually. With them in Github, all I would need to do is initiate a git clone of my site&rsquo;s repo on the new host, and the site files are ready to go!</li></ul></li></ul><p>With those goals in mind, I eventually landed on using docker containers of <a href=https://gohugo.io>Hugo</a> (to build my site), and <a href=https://nginxproxymanager.com>NGINX Proxy Manager</a> (to host it). If you would like to do something similar, and build a site like the one you are currently viewing, the below should be helpful! With that out of the way, lets begin.</p><h2 id=requirements>Requirements<a hidden class=anchor aria-hidden=true href=#requirements>#</a></h2><p>In order to successfully build and host a site using this method, the below are prerequisites:</p><ol>
<li><strong>Own a domain name.</strong> Mine is <a href=https://wallacelabs.tech>wallacelabs.tech</a>. If you do not already own one, I recommend purchasing from <a href=https://www.hover.com>Hover</a> or <a href=https://domains.google>Google Domains</a>. As part of owning a domain, you will have control of your domain&rsquo;s DNS records. If you somehow own a domain but do not have the ability to manage its DNS records, you&rsquo;ll have to get that worked out before proceeding.</li><li><strong>Own an internet-connected computer.</strong> This computer will be your web-server. Ideally, that computer will be a server in the sense that it is always on, and dedicated to server functions. While you could host your website on your everyday use computer, I would not recommend it. In terms of actual hardware though? It can be anything from a tiny Raspberry Pi to a massive EPYC Server. The important thing is that it can run docker, is connected to the internet, and is always on.</li><li><strong>Be able to manage port-forwarding rules on your network&rsquo;s router/gateway.</strong> Port-forwarding on your router, along with setting your domain&rsquo;s DNS records, are the two keys required to map traffic from the internet to the web-server hosting your site.</li><li><strong>Either a Static WAN IP, or a Dynamic DNS configuration.</strong> This is required in order for your domain&rsquo;s DNS rules to reliably point traffic to the router on your local network. Most home internet connections do not have static WAN IP&rsquo;s, so you&rsquo;ll likely need to configure a Dynamic DNS (DDNS) service. Stated simply, DDNS is a way of automatically informing your domain&rsquo;s DNS servers of any changes to your home network&rsquo;s Public IP Address. <a href="https://support.google.com/domains/answer/6147083?hl=en">Google Domains has a highly convenient DDNS service built in</a>, if you use them as your domain registrar. If you do not use Google Domains, I would strongly recommend using <a href=https://www.duckdns.org/why.jsp>DuckDNS</a>.</li></ol><figure class=align-center>
<img loading=lazy src=flow.png#center alt="When your website is accessed from the internet, the traffic will follow this general path. Most of these requirements exist in order to make sure that traffic can reliably traverse this path, allowing your site to be online."> <figcaption>
<p>When your website is accessed from the internet, the traffic will follow this general path. Most of these requirements exist in order to make sure that traffic can reliably traverse this path, allowing your site to be online.</p></figcaption></figure><p>If you can check all those boxes, you should be good to go.</p><h2 id=phase-one---getting-your-site-running-locally>Phase One - Getting Your Site Running Locally<a hidden class=anchor aria-hidden=true href=#phase-one---getting-your-site-running-locally>#</a></h2><p>Before worrying about domain DNS records, web hosting, and port-forwarding rules, we&rsquo;re going to focus on getting a site running on your local network. First, we&rsquo;ll setup the web-server.</p><h3 id=installing-docker>Installing Docker<a hidden class=anchor aria-hidden=true href=#installing-docker>#</a></h3><p>In order to setup containers for Hugo and NGINX Proxy Manager, you will need Docker installed on your web-server. Docker runs on Windows, macOS, and Linux, so the Operating System (OS) you use is mostly up to you. It is, however, worth mentioning that less setup is required on Linux and macOS. To run Docker in an ideal manner on Windows, you will need to configure Windows Subsystem for Linux (WSL) and subsequently, a Linux Distribution of your choice to run on WSL. This is not <em>overly complicated</em>, but it is outside the scope of this discussion. A post for another day, perhaps.</p><blockquote>
<p><strong>A quick aside:</strong> <em>If you plan on using this system as a general purpose home server, in addition to using it as a web-host, it is definitely worth considering the security implications of doing so. By using a computer for web hosting, you are inherently opening up this system to the internet, and there is a lot to be said for the practice of isolating web-hosts on your network through any variety of means. A thorough consideration of these potential risks (and the network hardening measures which might be taken to mitigate them) would be a large digression, and thus is outside the scope of this discussion. Another post for another day, perhaps. For now though, suffice it to say that our risk factor here is not particularly large, due primarily to the fact that we are discussing hosting a static site, not a dynamic one. Had I opted to host a dynamic site using Wordpress, or something of the like, I would be singing a different tune. For additional reading on the security implications of static vs. dynamic sites, <a href=https://srandby.org/digital-writing/index.html>see here</a>.</em></p></blockquote><p>Begin by <a href=https://docs.docker.com/engine/install/>installing the Docker Engine</a> using the instructions specific to your OS. Once Docker is installed, you can move on to setting up a Hugo container.</p><h3 id=setting-up-a-hugo-container>Setting up a Hugo container<a hidden class=anchor aria-hidden=true href=#setting-up-a-hugo-container>#</a></h3><p>To create my site, I utilized a container based on the <a href=https://hub.docker.com/r/klakegg/hugo/>Hugo Docker Image</a>. Hugo&rsquo;s Docker-Hub image is highly configurable, offering many different tags for specialized integration into custom web-publishing workflows. For my use, all I really wanted was basic container which, when run, provides an interactive shell environment where I can run Hugo commands. The below docker compose file will accomplish this:</p><script type=application/javascript src=https://gist.github.com/swallace17/2ce37da57497e37ec36110c24eb20668.js></script>
<p>To utilize this compose file to setup your own Hugo container, first, go ahead and download it. Then, open it in your text-editor of choice and update the volume mapping from <code>*PATH TO SITE*</code> in line 6 to wherever you would like your site&rsquo;s git repo to live on your host system. I would recommend creating a folder called <code>site</code> at the root level of your host. If you go that route, just change <code>*PATH TO SITE*</code> to <code>/site</code> and you&rsquo;re good to go. Lastly, open up a Terminal/Powershell session, navigate to whichever folder <code>docker-compose.yml</code> has been downloaded to, and run the following command:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>docker-compose up
</span></span></code></pre></div><p>You should see the following in your Terminal session:</p><figure class=align-center>
<img loading=lazy src=compose-terminal.png#center>
</figure><p>Now, open up Docker Desktop and you should see your container running, like this:</p><figure class=align-center>
<img loading=lazy src=compose-DD.png#center alt="Note that Docker Desktop is only currently avalible for macOS and Windows, though a Linux version is in Tech Preview, should you wish to try it."> <figcaption>
<p>Note that Docker Desktop is only currently avalible for macOS and Windows, though a Linux version <a href=https://docs.docker.com/desktop/linux/>is in Tech Preview</a>, should you wish to try it.</p></figcaption></figure><p>With the Hugo container setup and ready to go, you can now use it to create your Hugo site-template.</p><h3 id=creating-your-hugo-site>Creating your Hugo-Site<a hidden class=anchor aria-hidden=true href=#creating-your-hugo-site>#</a></h3><p>Now we&rsquo;re in business. Click the &ldquo;CLI&rdquo; button in Docker Desktop to open up a CLI session on your Hugo container. This is how you&rsquo;ll interact with the containerized Hugo program moving forward.</p><p>Your CLI session will have opened up inside the container&rsquo;s <code>/src</code> folder by default. The <code>/src</code> folder is a volume mapped to the host. Whatever data the container puts in this folder, you will be able to access from the host, and vice versa. In docker containers, data inside a volume map like this one is also the only data that will persist after the container is stopped or restarted (i.e. the <code>/src</code> folder is the only thing that does not get deleted when the container stops). The rest of the container is rebuilt from scratch every time the container starts. Given you probably want your Hugo-site to not be deleted after you create it, you will want to create it inside the <code>/src</code> folder. Furthermore, whenever you run Hugo commands, you&rsquo;ll want to run them in this folder (Hugo commands have to be run against a Hugo-site, and this is where your Hugo-site will be located).</p><p>So, with a CLI session opened at <code>/src</code>, run the below command. When you do, a blank Hugo site template will be initialized as a git repo inside the <code>/src</code> folder. Just be sure to change <code>*YOUR_SITE_NAME*</code> to whatever you would like to call the repo containing your site.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>hugo new site *YOUR_SITE_NAME*
</span></span></code></pre></div><p>The Hugo-site will be generated, and you will see the below message in your CLI session:</p><figure class=align-center>
<img loading=lazy src=site-creation-success.png#center alt=Success!> <figcaption>
<p>Success!</p></figcaption></figure><p>Next up, as indicated in that success message, you&rsquo;ll need to <a href=https://themes.gohugo.io>pick a theme</a> and install it. There are tons to choose from! If you are curious, the site you are viewing now is running on <a href=https://themes.gohugo.io/themes/hugo-papermod/>PaperMod</a>. Installing your chosen theme is as simple as following the instructions provided by your theme of choice. These instructions usually consist of installing the theme as a git-submodule. This method is convenient as it allows you to easily update your theme by initiating a git pull on that submodule. Put more simply- you&rsquo;ll have a one-click method of updating to a new version of your chosen theme in the future, should you want to do so. As you follow installation instructions, just make sure to run any necessary commands inside the Hugo container&rsquo;s CLI. With a blank Hugo site template created and your theme installed, the foundation of your site is in place.</p><h3 id=creating-your-first-post>Creating your first post<a hidden class=anchor aria-hidden=true href=#creating-your-first-post>#</a></h3><p>With your site created, you can now create a quick test post. Before that though, a brief rabbit-trail about Leaf Bundles.</p><h4 id=to-leaf-bundle-or-not-to-leaf-bundle>To Leaf-Bundle, or not to Leaf-Bundle<a hidden class=anchor aria-hidden=true href=#to-leaf-bundle-or-not-to-leaf-bundle>#</a></h4><blockquote>
<p>In a moment, you&rsquo;ll run a command that will create the first post on your newly created site. That command is going to create the post as something Hugo calls a <a href=https://gohugo.io/content-management/page-bundles/>Leaf Bundle</a>. I recommend creating all your posts as a leaf bundle because, among other benefits, it allows you to bundle post-images inside the same folder as as the markdown text-file of the post itself. If you do not create your posts as leaf bundles, any images for your posts will be lumped together, completely disorganized, inside a folder named <code>static</code> at the root level of your site. Not ideal. The below diagrams should help visualize this:</p></blockquote><p><strong>Leaf Bundle Post Structure</strong></p><blockquote>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>content/
</span></span><span style=display:flex><span>└──posts
</span></span><span style=display:flex><span>   └── YOUR_POST_NAME
</span></span><span style=display:flex><span>       ├── image1.png
</span></span><span style=display:flex><span>       ├── image2.png
</span></span><span style=display:flex><span>       └── index.md
</span></span></code></pre></div></blockquote><p><strong>Non-Leaf Bundle Post Structure</strong></p><blockquote>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>content/
</span></span><span style=display:flex><span>├── posts
</span></span><span style=display:flex><span>│   ├── my-post.md
</span></span><span style=display:flex><span>│   └── my-other-post.md
</span></span><span style=display:flex><span>└── static
</span></span><span style=display:flex><span>   ├── my-post_image1.png
</span></span><span style=display:flex><span>   ├── my-post_image2.png
</span></span><span style=display:flex><span>   ├── my-post_image3.jpg
</span></span><span style=display:flex><span>   ├── my-other-post_image1.png
</span></span><span style=display:flex><span>   └── my-other-post_image2.jpg
</span></span></code></pre></div></blockquote><p>As you accumulate more and more posts, the disorganized pile of images inside <code>/static</code> will continue to get larger and more unwieldy. I highly prefer the structure provided by the leaf bundle method, and I think you will too. Now, back to the business of creating your first post.</p><h4 id=creating-a-post-as-a-leaf-bundle>Creating a post (As a Leaf-Bundle!!)<a hidden class=anchor aria-hidden=true href=#creating-a-post-as-a-leaf-bundle>#</a></h4><p>Run the below command in the Hugo container CLI to create a test post on your site:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>hugo new content/posts/*YOUR_POST_NAME*/index.md
</span></span></code></pre></div><p>If you wish, feel free to modify index.md to add a quick &ldquo;hello world&rdquo; message, or something of the like, but do not feel obligated. Your first post has been created, whether it has anything written in it or not. With that, time to generate your site!</p><h3 id=generating-your-site>Generating your Site<a hidden class=anchor aria-hidden=true href=#generating-your-site>#</a></h3><p>One last command to run now.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>hugo
</span></span></code></pre></div><p>With that, your hugo site has been converted from a pile of markdown documents, images, themes, and the like (that only Hugo can understand) to an actual HTML website that can be displayed by any web browser. You&rsquo;ll find the generated website inside the <code>public</code> folder created at the root-level of your site&rsquo;s repo.</p><blockquote>
<p>This folder is what your web-server will be pushing out to the internet whenever someone accesses your website. Your web-server will only serve the HTML files that are in this server, so any time you want to update your site, or add a new post, you will need to run the <code>hugo</code> command again to generate your site fresh.</p></blockquote><h3 id=hosting-your-site-locally>Hosting your Site! (Locally)<a hidden class=anchor aria-hidden=true href=#hosting-your-site-locally>#</a></h3><p>Before setting up your newly generated site to be accessed over the internet, we&rsquo;re going to preview it on your local network. Hugo includes a built-in web-host function for this exact purpose. To take advantage of this, run the below command (again, inside the Hugo Container&rsquo;s CLI):</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>hugo server
</span></span></code></pre></div><p>With luck, you&rsquo;ll be greeted with the following message:</p><p><img loading=lazy src=hugo-server.png alt="Local Hosting Success">
</p><p>Open <a href=http://localhost:1313>http://localhost:1313</a> in your browser of choice to view your site! As you may have noticed in the above image, the nice thing about previewing your site this way is that Hugo generates the preview in something called &ldquo;Fast Render Mode.&rdquo; Fast Render Mode means you don&rsquo;t have to run the <code>hugo</code> command and regenerate your site every time you want to see a change displayed in your browser. Using the local preview, if you are editing a post, just save any changes you&rsquo;ve made to the <code>index.md</code> file and you will see them immediately reflected in your browser. Live previewing!</p><blockquote>
<p>If you were not so lucky, you may have gotten an error in your CLI session that says something like &ldquo;Check your Hugo installation: you need the extended version to build&mldr;&rdquo;. This is because some themes require an extended version of the Hugo docker image in order to build successfully. Remember earlier, when I said the Hugo image is highly configurable, has many tags, blah blah blah? Here you have a great illustration of that fact. If this happens to you, change line 3 of <code>docker-compose.yml</code> from <code>image: klakegg/hugo:latest</code> to <code>image: klakegg/hugo:ext-alpine</code>. Shut down your container, relaunch it using <code>docker-compose up</code>, and you should be good to go.</p></blockquote><h2 id=phase-two---hosting-your-site-on-the-web>Phase Two - Hosting your Site on the Web!<a hidden class=anchor aria-hidden=true href=#phase-two---hosting-your-site-on-the-web>#</a></h2><p>Believe it or not, this should be the easy part. We&rsquo;re going to spin up another container, this time for <a href=https://nginxproxymanager.com/>NGINX Proxy Manager (NPM)</a>. NGINX Proxy Manager is an awesome web-based GUI built on top of the <a href=https://www.nginx.com/>NGINX web server</a>. It is generally used for securely exposing services running on your network to the internet. For example, if you wanted to securely access your <a href=https://www.home-assistant.io/>Home Assistant Server</a> over the internet, rather than strictly on your home network, or via VPN. In that scenario, you already have a web-server operating a given service or web-app locally, you are just using NPM as a reverse proxy to access that service over the internet. So how can NPM be used to host your site? With a little bit of tricky configuration, NPM can be used to host static files to the web&ndash; which is exactly what Hugo static sites are!</p><p>As preparation for that, lets quickly configure DNS rules for your domain, and add port forwarding rules to your router.</p><h3 id=configuring-your-domain-and-router>Configuring your Domain and Router<a hidden class=anchor aria-hidden=true href=#configuring-your-domain-and-router>#</a></h3><p>Begin by logging into your domain registrar&rsquo;s website, then pull up the page for managing your domain&rsquo;s DNS records. For me, on Google Domains, it looks like this:</p><figure class=align-center>
<img loading=lazy src=gDomains-DNS.png#center>
</figure><p>You will want to create a DNS A record resolving <code>yourDomain.com</code> to your <a href=https://whatismyipaddress.com/>public IP address</a>. Ideally, this address will be static, but most home connections are not. With that in mind, I&rsquo;d recommend configuring Dynamic DNS (DDNS) via <a href="https://support.google.com/domains/answer/6147083?hl=en">Google Domains</a> or <a href=https://www.duckdns.org/why.jsp>Duck DNS</a>, as earlier stated. Without DDNS in place, your site will go down any time the public IP on your home network changes (usually when you reboot your modem). With this DNS record in place, anytime someone accesses <code>yourDomain.com</code>, your domain registrar&rsquo;s nameservers will resolve the request to your home network&rsquo;s router/gateway.</p><p>All thats left is to setup your router/gateway to send that traffic to your webserver, completing the chain. With that in mind, login to the management interface of your router/gateway, navigate to the Port-Forwarding management page, and add a rule. This will be different on every router, but for me, on a Ubiquiti UniFi based network, it looks like this:</p><figure class=align-center>
<img loading=lazy src=pf-rule.png#center alt="Make sure to set &amp;lsquo;Forward IP&amp;rsquo; to the IP address of your web-server. Also, double check and make sure your web-server is setup with a static IP address while you&amp;rsquo;re at it. Don&amp;rsquo;t want that changing on you!"> <figcaption>
<p>Make sure to set &lsquo;Forward IP&rsquo; to the IP address of your web-server. Also, double check and make sure your web-server is setup with a static IP address while you&rsquo;re at it. Don&rsquo;t want that changing on you!</p></figcaption></figure><p>You&rsquo;re going to need to create two rules here&ndash; one for HTTP traffic coming in over port 80, and another for HTTPS on port 443. You&rsquo;re configuring these rules to route any traffic coming into your network over port 80 or 443 to your web-server. With those rules in place, you should see something like this:</p><figure class=align-center>
<img loading=lazy src=pf.png#center alt="Port-forwarding complete. Almost done!"> <figcaption>
<p>Port-forwarding complete. Almost done!</p></figcaption></figure><p>With port forwarding complete, you&rsquo;ve completed the chain such that all traffic going to your domain will reach your web-server, like in this image we looked at in the beginning:</p><figure class=align-center>
<img loading=lazy src=flow.png#center alt="Traffic mapping complete!"> <figcaption>
<p>Traffic mapping complete!</p></figcaption></figure><h3 id=setting-up-an-nginx-proxy-manager-container>Setting up an NGINX Proxy Manager container<a hidden class=anchor aria-hidden=true href=#setting-up-an-nginx-proxy-manager-container>#</a></h3><p>We&rsquo;re nearing the end! Now that</p><ol>
<li>Your HTML site is sitting in the <code>public</code> folder</li><li>Your router and domain DNS are configured to point HTTP and HTTPS traffic to your web-server</li></ol><p>All thats left is to configure NGINX Proxy Manager to actually serve your website! To do that, use the below <code>docker-compose.yml</code> to create an NPM container on your host. Same drill as before, download the file, and you&rsquo;ll need to make a couple edits before running.</p><script type=application/javascript src=https://gist.github.com/swallace17/ac84eccb6fdca3c9b62ee4c162b1ba3a.js></script>
<p>First, you&rsquo;ll need to chose where on your host system you would like NPM data and LetsEncrypt certificates to live. I recommend creating a folder named <code>container_app_data</code> at the root of your host, with sub-folder <code>NPM</code>. Do that, then just change <code>*PATH*</code> in lines 10 and 11 of <code>docker-compose.yml</code> to <code>/container_app_data/NPM</code>, and docker will automatically create sub-folders for Data and Lets Encrypt at <code>/container_app_data/NPM/data</code> and <code>/container_app_data/NPM/letsencrypt</code> respectively.</p><p>Lastly, you&rsquo;ll need to change <code>*PATH TO SITE*</code> in line 12. Set this to be the same as whatever you chose for <code>*PATH TO SITE*</code> when creating the Hugo container. Giving NPM access to <code>*PATH TO SITE*/public</code> will allow it to access your generated site (inside the Hugo container&rsquo;s public folder).</p><p>With these modifications in place, open a Terminal/Powershell session at the location of <code>docker-compose.yml</code> and run the command:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>docker-compose up
</span></span></code></pre></div><p>If everything is setup correctly in <code>docker-compose.yml</code>, the container will build and you&rsquo;ll be greeted by the following new container in Docker Desktop:</p><figure class=align-center>
<img loading=lazy src=npm-dd.png#center alt="Two containers now!"> <figcaption>
<p>Two containers now!</p></figcaption></figure><h3 id=configuring-npm-for-static-site-hosting>Configuring NPM for Static-Site Hosting<a hidden class=anchor aria-hidden=true href=#configuring-npm-for-static-site-hosting>#</a></h3><p>With the container running, open up a browser on your host machine and navigate to <a href=http://localhost:81>http://localhost:81</a>. When you do, you should see the NPM login page:</p><figure class=align-center>
<img loading=lazy src=npm-browser.png#center>
</figure><p>To login, use the default username and password:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>Email:    admin@example.com
</span></span><span style=display:flex><span>Password: changeme
</span></span></code></pre></div><p>You will then be prompted to setup new login credentials. As with anything, make sure to setup a unique, strong password (I recommend <a href=https://1password.com/>1Password</a> to help with this). Once you&rsquo;ve setup your new login setup, click on &ldquo;SSL certificates&rdquo; in the tab bar, then &ldquo;Add SSL Certificate.&rdquo; On this screen, type in your domain name, email and &ldquo;I agree to the Let&rsquo;s Encrypt Terms of Service&rdquo;, like this:</p><figure class=align-center>
<img loading=lazy src=create-cert.png#center>
</figure><p>Before clicking save, make sure to click the button to &ldquo;Text Server Reachability&rdquo;. You should see the following message if successful:</p><figure class=align-center>
<img loading=lazy src=domain-reachable.png#center>
</figure><p>Success here demonstrates traffic from the internet is reaching your web server correctly. Congratulations! You must have setup your domain DNS records and port-forwarding rules successfully. If you don&rsquo;t get a success message here, you might need to go back and double-check those steps. Click the save button, and your SSL certificate will be added:</p><figure class=align-center>
<img loading=lazy src=ssl-success.png#center>
</figure><p>With your SSL certificate created, all thats left is to configure a Proxy Host, and your site is live! Click the <code>Hosts</code> tab, then <code>Proxy Hosts</code>. On the Proxy Hosts page, click the <code>Add Proxy Host</code> button. The New Proxy Host screen will pop up, on the details tab. Set it up like this:</p><figure class=align-center>
<img loading=lazy src=proxyhost.png#center alt="Obviously be sure to use your actual domain name, not yourDomain.com and www.yourDomain.com"> <figcaption>
<p>Obviously be sure to use your actual domain name, not <code>yourDomain.com</code> and <code>www.yourDomain.com</code></p></figcaption></figure><p>Then click on the SSL tab and select the SSL cert you just created, like this:</p><figure class=align-center>
<img loading=lazy src=ph-ssl.png#center>
</figure><p>Lastly, click the Advanced tab, and paste the below as <code>Custom Nginx Configuration</code>.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>location / {
</span></span><span style=display:flex><span>  root /site/;
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>like this:</p><figure class=align-center>
<img loading=lazy src=ph-advanced.png#center alt="This is the &amp;rsquo;tricky configuration&amp;rsquo; I mentioned earlier. Thanks to Burke Azbill writing on dimentionquest.net for figuring this out!"> <figcaption>
<p>This is the &rsquo;tricky configuration&rsquo; I mentioned earlier. <a href=https://dimensionquest.net/2021/02/host-static-site-on-npm/>Thanks to Burke Azbill writing on dimentionquest.net for figuring this out!</a></p></figcaption></figure><p>This little bit of custom configuration is having NGINX host the static content contained inside the NPM container&rsquo;s <code>/site</code> folder. That folder just so happens to container your website, as, when you modified the <code>docker-compose.yml</code> for the NPM container, you mapped it to the same location as the <code>public</code> folder your website was generated in. Save this config, and your website should be live! Open up a browser, navigate to your domain name, and there it will be! With your site created, all you have to do now is fill it with content. Congratulations!</p><h2 id=phase-three---wrapping-up>Phase Three - Wrapping Up<a hidden class=anchor aria-hidden=true href=#phase-three---wrapping-up>#</a></h2><p>Lets wrap up with connecting your site up to a Github repo, and some things you can do to enable some general quality-of-life improvements as you manage your site.</p><h3 id=configure-additional-development-environments>Configure Additional Development Environments<a hidden class=anchor aria-hidden=true href=#configure-additional-development-environments>#</a></h3><p>This may sound counterintuitive, but I would recommend setting up as additional development environment on your everyday computer to do most of your site development on&ndash;setting up the site, testing changes, writing posts, etc. Then, whenever you are ready to publish, you push your changes up to your Github repo, and pull them down on the web server. Boom, published. This is how I personally develop for my site most of the time. On my laptop, I use the Atom text editor</p></div><footer class=post-footer>
<ul class=post-tags>
<li><a href=https://wallacelabs.tech/tags/hugo/>Hugo</a></li><li><a href=https://wallacelabs.tech/tags/nginx-proxy-manager/>NGINX Proxy Manager</a></li><li><a href=https://wallacelabs.tech/tags/docker-compose/>Docker Compose</a></li><li><a href=https://wallacelabs.tech/tags/dynamic-dns-ddns/>Dynamic DNS (DDNS)</a></li></ul><div class=share-buttons>
<a target=_blank rel="noopener noreferrer" aria-label="share Static Site Hosting for Free with Docker, Hugo, and NGINX Proxy Manger on twitter" href="https://twitter.com/intent/tweet/?text=Static%20Site%20Hosting%20for%20Free%20with%20Docker%2c%20Hugo%2c%20and%20NGINX%20Proxy%20Manger&url=https%3a%2f%2fwallacelabs.tech%2fposts%2fstatic-site-hosting-with-docker-hugo-and-nginx-proxy-manger%2f&hashtags=Hugo%2cNGINXProxyManager%2cDockerCompose%2cDynamicDNS%28DDNS%29"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM195.519 424.544c135.939.0 210.268-112.643 210.268-210.268.0-3.218.0-6.437-.153-9.502 14.406-10.421 26.973-23.448 36.935-38.314-13.18 5.824-27.433 9.809-42.452 11.648 15.326-9.196 26.973-23.602 32.49-40.92-14.252 8.429-30.038 14.56-46.896 17.931-13.487-14.406-32.644-23.295-53.946-23.295-40.767.0-73.87 33.104-73.87 73.87.0 5.824.613 11.494 1.992 16.858-61.456-3.065-115.862-32.49-152.337-77.241-6.284 10.881-9.962 23.601-9.962 37.088.0 25.594 13.027 48.276 32.95 61.456-12.107-.307-23.448-3.678-33.41-9.196v.92c0 35.862 25.441 65.594 59.311 72.49-6.13 1.686-12.72 2.606-19.464 2.606-4.751.0-9.348-.46-13.946-1.38 9.349 29.426 36.628 50.728 68.965 51.341-25.287 19.771-57.164 31.571-91.8 31.571-5.977.0-11.801-.306-17.625-1.073 32.337 21.15 71.264 33.41 112.95 33.41z"/></svg>
</a>
<a target=_blank rel="noopener noreferrer" aria-label="share Static Site Hosting for Free with Docker, Hugo, and NGINX Proxy Manger on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&url=https%3a%2f%2fwallacelabs.tech%2fposts%2fstatic-site-hosting-with-docker-hugo-and-nginx-proxy-manger%2f&title=Static%20Site%20Hosting%20for%20Free%20with%20Docker%2c%20Hugo%2c%20and%20NGINX%20Proxy%20Manger&summary=Static%20Site%20Hosting%20for%20Free%20with%20Docker%2c%20Hugo%2c%20and%20NGINX%20Proxy%20Manger&source=https%3a%2f%2fwallacelabs.tech%2fposts%2fstatic-site-hosting-with-docker-hugo-and-nginx-proxy-manger%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg>
</a>
<a target=_blank rel="noopener noreferrer" aria-label="share Static Site Hosting for Free with Docker, Hugo, and NGINX Proxy Manger on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fwallacelabs.tech%2fposts%2fstatic-site-hosting-with-docker-hugo-and-nginx-proxy-manger%2f&title=Static%20Site%20Hosting%20for%20Free%20with%20Docker%2c%20Hugo%2c%20and%20NGINX%20Proxy%20Manger"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg>
</a>
<a target=_blank rel="noopener noreferrer" aria-label="share Static Site Hosting for Free with Docker, Hugo, and NGINX Proxy Manger on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fwallacelabs.tech%2fposts%2fstatic-site-hosting-with-docker-hugo-and-nginx-proxy-manger%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg>
</a>
<a target=_blank rel="noopener noreferrer" aria-label="share Static Site Hosting for Free with Docker, Hugo, and NGINX Proxy Manger on whatsapp" href="https://api.whatsapp.com/send?text=Static%20Site%20Hosting%20for%20Free%20with%20Docker%2c%20Hugo%2c%20and%20NGINX%20Proxy%20Manger%20-%20https%3a%2f%2fwallacelabs.tech%2fposts%2fstatic-site-hosting-with-docker-hugo-and-nginx-proxy-manger%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg>
</a>
<a target=_blank rel="noopener noreferrer" aria-label="share Static Site Hosting for Free with Docker, Hugo, and NGINX Proxy Manger on telegram" href="https://telegram.me/share/url?text=Static%20Site%20Hosting%20for%20Free%20with%20Docker%2c%20Hugo%2c%20and%20NGINX%20Proxy%20Manger&url=https%3a%2f%2fwallacelabs.tech%2fposts%2fstatic-site-hosting-with-docker-hugo-and-nginx-proxy-manger%2f"><svg viewBox="2 2 28 28"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg>
</a>
</div></footer></article></main><footer class=footer>
<span>&copy; 2022 <a href=https://wallacelabs.tech>Wallace Labs</a></span>
<span>
Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a>
</span>
</footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a>
<script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(t){t.preventDefault();var e=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(e)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(e)}']`).scrollIntoView({behavior:"smooth"}),e==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${e}`)})})</script>
<script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script>
<script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script>
<script>document.querySelectorAll("pre > code").forEach(t=>{const n=t.parentNode.parentNode,e=document.createElement("button");e.classList.add("copy-code"),e.innerText="copy";function s(){e.innerText="copied!",setTimeout(()=>{e.innerText="copy"},2e3)}e.addEventListener("click",o=>{if("clipboard"in navigator){navigator.clipboard.writeText(t.textContent),s();return}const e=document.createRange();e.selectNodeContents(t);const n=window.getSelection();n.removeAllRanges(),n.addRange(e);try{document.execCommand("copy"),s()}catch(e){}n.removeRange(e)}),n.classList.contains("highlight")?n.appendChild(e):n.parentNode.firstChild==n||(t.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?t.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(e):t.parentNode.appendChild(e))})</script>
</body></html>